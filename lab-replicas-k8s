ms replica k8s
# plan
(dazyc do orchestracji i przyczyna to skomplikowany przypadek)
(simple example fokus on subcject zerodowntown, deploy strategy and replicas)
deploy strategy: rollout, blue-green, canary (based on replicas all strategy)
lab:
# cmd 
apt install podman-docker
alias p=podman
p login docker.io
cd /ms/nginx1
echo 'app 1.0' > index.html
#Dockerfile
FROM docker.io/library/nginx
COPY index.html /usr/share/nginx/html/index.html
p build -t docker.io/n507592979/ms:v12 .
p push docker.io/n507592979/ms:v12

https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/


> scenario 1
while true; do curl master:30011;date;sleep 1;clear;done

apiVersion: v1
kind: Pod
metadata:
  name: app
  labels:
    app: app
spec:
  containers:
  - name: app
    image: docker.io/n507592979/ms:v4
  imagePullSecrets:
  - name: regcred
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: app
  name: app
spec:
  ports:
  - nodePort: 30011
    port: 80
    protocol: TCP
    targetPort: 80
  selector:
    app: app
  sessionAffinity: None
  type: NodePort


chenge wersion and show downtime





